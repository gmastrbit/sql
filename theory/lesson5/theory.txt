Довідникова цілісність БД. Агрегатні функції SQL

Ключі допомагають зберегти цілісніть БД. 

Первинний ключ - це атрибут таблиці, який унікальним чином ідентифікує кожний запис таблиці.

Збитковість данних - повтор значень. Тоді таблиця порушує 2 нормальну форму БД. (Приклад: повтор країн в таблиці міст).

Для цього треба створювати додаткову таблицю, де для кожної країни поставити ID. Тоді ця таблиця буде довідником, а таблиця міст буде дочірньою таблицею.

Тоді значення по ID країни будуть зовнішніми ключами.

Поле, яке ми хочемо використовувати як зовнішній ключ, має бути проіндексовано.

За допомогою зовнішнього ключа можна добитися довідникової цілісності БД.

Зовнішні ключі дозволені лише на InnoDB, на MyISAM не дозволено.

RESTRICT - заборона на зміну даних з довідника, якщо ці дані є в дочірній таблиці.

CASCADE - будь-яка зміна буде зафіксоване так само і в дочірній таблиці.

Для створення зовнішніх ключів, типи полів мають співпадати.

Індекси використовуються в пошуку.
Вони використовуються для пришвидшення вибірки і для підтримання цілісності БД.

Індекс - це як вказівник А-Я у Вікіпедії.

Їх треба використовувати для тих полів, по яким буде йти вибірка даних. Вони дуже збільшують розмір БД.

Агрегатні функції

COUNT() - кількість
SUM() - сума
AVG() - середнє
MIN() - мінімум
MAX() - максимум

SUM i AVG - лише з числовими полями можна використовувати.

Групування - GROUP BY

Об'єднує множину в одне значення.

Групувати можна лише по полю, по якому вибираємо.

HAVING
Фільтр, якщо треба фільтрувати групи.

Фільтрує групові значення.